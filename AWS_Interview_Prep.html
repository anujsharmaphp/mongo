<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Interview Prep</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #f8f9fa; color: #1e293b; line-height: 1.6; }

        .layout { display: flex; min-height: 100vh; }

        /* Sidebar */
        .sidebar {
            width: 260px;
            min-width: 260px;
            background: #fff;
            border-right: 1px solid #e2e8f0;
            padding: 24px 0;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            overflow-y: auto;
        }
        .sidebar h2 { font-size: 15px; color: #0f766e; padding: 0 20px; margin-bottom: 4px; }
        .sidebar .sub { font-size: 11px; color: #94a3b8; padding: 0 20px; margin-bottom: 20px; }
        .sidebar nav a {
            display: block;
            padding: 9px 20px;
            font-size: 13px;
            color: #475569;
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s;
        }
        .sidebar nav a:hover { background: #f0fdf4; color: #0f766e; border-left-color: #0f766e; }
        .sidebar nav a.active { background: #f0fdf4; color: #0f766e; border-left-color: #0f766e; font-weight: 600; }
        .sidebar nav a.pending { color: #cbd5e1; }

        /* Main content */
        .main { margin-left: 260px; padding: 30px 40px; max-width: 820px; }

        /* Concept block */
        .concept { background: #fff; border-radius: 10px; padding: 28px; margin-bottom: 24px; border: 1px solid #e2e8f0; }
        .concept h2 { font-size: 20px; color: #0f766e; margin-bottom: 4px; }
        .concept .tag { display: inline-block; background: #f0fdf4; color: #0f766e; font-size: 11px; padding: 2px 10px; border-radius: 20px; margin-bottom: 14px; font-weight: 500; }

        /* Simple points */
        .point { margin-bottom: 14px; }
        .point strong { color: #0f766e; font-size: 13px; }
        .point p { font-size: 13px; color: #475569; margin-top: 2px; }
        .point ul { padding-left: 18px; margin-top: 4px; }
        .point li { font-size: 12.5px; color: #475569; margin-bottom: 3px; }
        .point li strong { color: #1e293b; }

        /* Code */
        pre { background: #f1f5f9; border-radius: 8px; padding: 14px; overflow-x: auto; margin: 10px 0; border: 1px solid #e2e8f0; }
        code { font-family: 'Fira Code', monospace; font-size: 12px; color: #0f766e; }

        /* Q&A */
        .qa h3 { font-size: 13px; color: #b45309; margin: 18px 0 10px; text-transform: uppercase; letter-spacing: 1px; border-top: 1px solid #e2e8f0; padding-top: 16px; }
        .q { background: #fffbeb; border-radius: 8px; padding: 12px 14px; margin-bottom: 8px; border: 1px solid #fde68a; }
        .q .question { font-size: 13px; font-weight: 600; color: #1e293b; margin-bottom: 6px; }
        .q .answer { font-size: 12.5px; color: #57534e; }
        .q .answer strong { color: #1e293b; }

        /* Mobile menu button */
        .menu-btn {
            display: none;
            position: fixed;
            top: 12px;
            left: 12px;
            z-index: 1001;
            background: #0f766e;
            color: #fff;
            border: none;
            border-radius: 8px;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 20px;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        .menu-btn span { line-height: 1; }

        /* Overlay */
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.4);
            z-index: 999;
        }
        .sidebar-overlay.show { display: block; }

        /* Responsive */
        @media (max-width: 768px) {
            .menu-btn { display: flex; }
            .sidebar {
                display: block;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 1000;
            }
            .sidebar.open { transform: translateX(0); }
            .main { margin-left: 0; padding: 60px 16px 20px; }
            .concept { padding: 18px; }
            pre { padding: 10px; font-size: 11px; }
        }
    </style>
</head>
<body>
<button class="menu-btn" onclick="toggleMenu()" aria-label="Toggle menu"><span>&#9776;</span></button>
<div class="sidebar-overlay" onclick="toggleMenu()"></div>

<div class="layout">

    <!-- Sidebar -->
    <aside class="sidebar">
        <h2>AWS Prep</h2>
        <p class="sub">Cloud Architect Guide</p>
        <nav>
            <a href="#concept-1" class="active">1. EC2 & Compute</a>
            <a href="#concept-2">2. VPC & Networking</a>
            <a href="#concept-3">3. S3 & Storage</a>
            <a href="#concept-4" class="pending">4. IAM & Security</a>
            <a href="#concept-5" class="pending">5. ELB & Auto Scaling</a>
            <a href="#concept-6" class="pending">6. Route 53 & DNS</a>
            <a href="#concept-7" class="pending">7. RDS & Aurora</a>
            <a href="#concept-8" class="pending">8. DynamoDB</a>
            <a href="#concept-9" class="pending">9. Lambda & Serverless</a>
            <a href="#concept-10" class="pending">10. API Gateway</a>
            <a href="#concept-11" class="pending">11. SQS, SNS & EventBridge</a>
            <a href="#concept-12" class="pending">12. ECS & EKS</a>
            <a href="#concept-13" class="pending">13. CloudFront & CDN</a>
            <a href="#concept-14" class="pending">14. CloudWatch & Monitoring</a>
            <a href="#concept-15" class="pending">15. CloudFormation & IaC</a>
            <a href="#concept-16" class="pending">16. ElastiCache</a>
            <a href="#concept-17" class="pending">17. Kinesis & Streaming</a>
            <a href="#concept-18" class="pending">18. Security Deep Dive</a>
            <a href="#concept-19" class="pending">19. Well-Architected Framework</a>
            <a href="#concept-20" class="pending">20. Architecture Scenarios</a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main">

        <!-- CONCEPT 1 -->
        <div class="concept" id="concept-1">
            <h2>1. EC2 & Compute</h2>
            <span class="tag">Core Compute</span>

            <div class="point">
                <strong>What is EC2?</strong>
                <p>Elastic Compute Cloud &mdash; virtual servers in the cloud. You choose instance type (CPU, RAM, storage, network), OS (AMI), and pay for what you use. Foundation of AWS compute.</p>
            </div>

            <div class="point">
                <strong>Instance Families</strong>
                <ul>
                    <li><strong>General Purpose (T3, M5, M6i):</strong> Balanced CPU/memory. Web servers, small DBs. T3 has burstable CPU with credits.</li>
                    <li><strong>Compute Optimized (C5, C6i):</strong> High CPU. Batch processing, ML inference, gaming servers.</li>
                    <li><strong>Memory Optimized (R5, R6i, X1):</strong> High RAM. In-memory databases (Redis, SAP HANA), real-time analytics.</li>
                    <li><strong>Storage Optimized (I3, D2):</strong> High sequential read/write. Data warehousing, distributed file systems.</li>
                    <li><strong>Accelerated (P4, G5, Inf1):</strong> GPU/custom chips. ML training, video encoding, graphics rendering.</li>
                </ul>
            </div>

            <div class="point">
                <strong>Pricing Models</strong>
                <ul>
                    <li><strong>On-Demand:</strong> Pay per second/hour. No commitment. Best for unpredictable, short-term workloads.</li>
                    <li><strong>Reserved (1yr / 3yr):</strong> Up to 72% discount. Commit to instance type in a region. Standard or Convertible.</li>
                    <li><strong>Savings Plans:</strong> Commit to $/hour spend (not instance type). More flexible than Reserved. Compute or EC2 plans.</li>
                    <li><strong>Spot Instances:</strong> Up to 90% discount. AWS can reclaim with 2-min notice. Best for batch jobs, CI/CD, stateless workers.</li>
                    <li><strong>Dedicated Hosts:</strong> Physical server dedicated to you. For licensing (Windows Server, Oracle) or compliance.</li>
                </ul>
            </div>

            <div class="point">
                <strong>AMI (Amazon Machine Image)</strong>
                <p>Template containing OS, software, config. Launch instances from AMI. You can create custom AMIs for fast, consistent deployments. Region-specific &mdash; copy across regions for DR.</p>
<pre><code># Create AMI from running instance
aws ec2 create-image --instance-id i-1234567890abcdef0 \
  --name "my-app-v2.1" --no-reboot

# Launch from custom AMI
aws ec2 run-instances --image-id ami-0abcdef1234567890 \
  --instance-type t3.medium --key-name my-key \
  --security-group-ids sg-903004f8 --count 1</code></pre>
            </div>

            <div class="point">
                <strong>EBS (Elastic Block Store) vs Instance Store</strong>
                <ul>
                    <li><strong>EBS:</strong> Network-attached persistent storage. Survives instance stop/terminate. Snapshot to S3 for backup. Types: gp3 (general SSD), io2 (provisioned IOPS), st1 (throughput HDD), sc1 (cold HDD).</li>
                    <li><strong>Instance Store:</strong> Physically attached to host. Highest I/O performance. Data lost on stop/terminate. Use for temp data, caches, buffers.</li>
                    <li><strong>gp3 (default):</strong> 3000 IOPS baseline, 125 MB/s. Scale IOPS/throughput independently. Most workloads.</li>
                    <li><strong>io2 Block Express:</strong> Up to 256,000 IOPS. Mission-critical databases.</li>
                </ul>
            </div>

            <div class="point">
                <strong>Placement Groups</strong>
                <ul>
                    <li><strong>Cluster:</strong> All instances in same rack. Lowest latency (10 Gbps). HPC, tightly coupled workloads.</li>
                    <li><strong>Spread:</strong> Each instance on different hardware. Max 7 per AZ. Critical apps that need isolation.</li>
                    <li><strong>Partition:</strong> Instances spread across partitions (racks). Big data (Hadoop, Kafka, Cassandra).</li>
                </ul>
            </div>

            <div class="point">
                <strong>User Data & Metadata</strong>
<pre><code># User Data: bootstrap script runs on first launch
#!/bin/bash
yum update -y
yum install -y httpd
systemctl start httpd
echo "Hello from $(hostname)" > /var/www/html/index.html

# Instance Metadata: query info about running instance
curl http://169.254.169.254/latest/meta-data/instance-id
curl http://169.254.169.254/latest/meta-data/public-ipv4
curl http://169.254.169.254/latest/meta-data/iam/security-credentials/role-name
# IMDSv2 (recommended - token-based, more secure)
TOKEN=$(curl -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 21600")
curl -H "X-aws-ec2-metadata-token: $TOKEN" http://169.254.169.254/latest/meta-data/</code></pre>
            </div>

            <div class="point">
                <strong>Security Groups vs NACLs (quick ref)</strong>
                <ul>
                    <li><strong>Security Group:</strong> Instance-level firewall. <strong>Stateful</strong> (return traffic auto-allowed). Allow rules only. Default: deny all inbound, allow all outbound.</li>
                    <li><strong>NACL:</strong> Subnet-level firewall. <strong>Stateless</strong> (must define both directions). Allow + Deny rules. Evaluated by rule number (lowest first).</li>
                </ul>
            </div>

            <!-- Interview Q&A -->
            <div class="qa">
                <h3>Interview Q&A</h3>

                <div class="q">
                    <div class="question">Q1: How do you choose the right EC2 instance type?</div>
                    <div class="answer"><strong>Step 1:</strong> Profile your workload &mdash; CPU-bound? Memory-bound? I/O-bound? <strong>Step 2:</strong> Start with general purpose (T3/M5). <strong>Step 3:</strong> Monitor CloudWatch (CPU utilization, memory, network). <strong>Step 4:</strong> Right-size based on data. For our healthcare NLP processing: started with M5.xlarge, found it was CPU-bound, switched to C5.2xlarge &mdash; 40% faster, same cost.</div>
                </div>

                <div class="q">
                    <div class="question">Q2: Spot vs Reserved vs Savings Plans &mdash; when to use each?</div>
                    <div class="answer"><strong>Reserved:</strong> Steady-state workloads (production DB, always-on API servers) &mdash; know exact instance type. <strong>Savings Plans:</strong> Steady spend but may change instance types/regions &mdash; more flexibility. <strong>Spot:</strong> Fault-tolerant, stateless workloads (batch processing, CI/CD, data pipelines). We used Spot for NLP batch processing (70% savings) + Reserved for production API servers.</div>
                </div>

                <div class="q">
                    <div class="question">Q3: What happens when a Spot instance is interrupted?</div>
                    <div class="answer">AWS sends a <strong>2-minute warning</strong> via instance metadata and CloudWatch Events. Your app should: <strong>1)</strong> Check <code>http://169.254.169.254/latest/meta-data/spot/termination-time</code> periodically. <strong>2)</strong> Save state / checkpoint work. <strong>3)</strong> Deregister from load balancer. Best practice: use <strong>Spot Fleet</strong> with multiple instance types and AZs to reduce interruption risk. Combine with On-Demand for baseline capacity.</div>
                </div>

                <div class="q">
                    <div class="question">Q4: EBS gp3 vs gp2 &mdash; why gp3 is better?</div>
                    <div class="answer"><strong>gp2:</strong> IOPS scales with volume size (3 IOPS/GB, max 16K). Need 5.3TB volume to get max IOPS. <strong>gp3:</strong> 3000 IOPS + 125 MB/s baseline <strong>regardless of size</strong>. Scale IOPS (up to 16K) and throughput (up to 1000 MB/s) independently. 20% cheaper than gp2 at baseline. Always use gp3 for new volumes.</div>
                </div>

                <div class="q">
                    <div class="question">Q5: How to make EC2 highly available?</div>
                    <div class="answer"><strong>1)</strong> Launch instances across <strong>multiple AZs</strong>. <strong>2)</strong> Use <strong>Auto Scaling Group</strong> with min/max/desired capacity. <strong>3)</strong> Put behind <strong>ALB</strong> for load distribution + health checks. <strong>4)</strong> Use <strong>Launch Template</strong> (not Launch Config) for consistent deployments. <strong>5)</strong> Store state externally (RDS, ElastiCache, S3) &mdash; instances should be stateless. <strong>6)</strong> Custom AMI for fast boot (pre-baked vs user-data bootstrapping).</div>
                </div>

                <div class="q">
                    <div class="question">Q6: IMDSv1 vs IMDSv2 &mdash; why enforce v2?</div>
                    <div class="answer">IMDSv1: simple GET request to <code>169.254.169.254</code>. Vulnerable to <strong>SSRF attacks</strong> &mdash; if attacker tricks your app into making a request to metadata endpoint, they can steal IAM role credentials. <strong>IMDSv2:</strong> Requires PUT request first to get a token, then use token in subsequent requests. Blocks SSRF because attacker can't get the token. Always enforce IMDSv2 in production: <code>--metadata-options HttpTokens=required</code>.</div>
                </div>

                <div class="q">
                    <div class="question">Q7: When to use Cluster vs Spread placement group?</div>
                    <div class="answer"><strong>Cluster:</strong> All instances same rack, same AZ. <strong>10 Gbps network</strong> between instances. Use for HPC, tightly-coupled apps where inter-node latency matters (MPI, distributed ML training). Risk: rack failure takes all instances. <strong>Spread:</strong> Each instance on different hardware, across AZs. Max 7 per AZ. Use for critical apps (primary DB replicas, Kafka brokers) where you need <strong>hardware isolation</strong>.</div>
                </div>

                <div class="q">
                    <div class="question">Q8: How do you handle EC2 cost optimization?</div>
                    <div class="answer"><strong>1)</strong> Right-size: use AWS Compute Optimizer to find underutilized instances. <strong>2)</strong> Reserved/Savings Plans for baseline (60-72% savings). <strong>3)</strong> Spot for batch/dev (up to 90% savings). <strong>4)</strong> Schedule: stop dev/staging instances nights/weekends (Instance Scheduler). <strong>5)</strong> Use ARM-based Graviton instances (M6g, C6g) &mdash; 20% cheaper, 40% better price-performance. <strong>6)</strong> Delete unused EBS volumes and unattached Elastic IPs.</div>
                </div>
            </div>
        </div>

        <!-- CONCEPT 2 -->
        <div class="concept" id="concept-2">
            <h2>2. VPC & Networking</h2>
            <span class="tag">Networking Foundation</span>

            <div class="point">
                <strong>What is VPC?</strong>
                <p>Virtual Private Cloud &mdash; your own isolated network in AWS. You control IP ranges (CIDR), subnets, route tables, gateways. Every resource (EC2, RDS, Lambda) lives inside a VPC. Think of it as your private data center in the cloud.</p>
            </div>

            <div class="point">
                <strong>CIDR & Subnets</strong>
                <ul>
                    <li><strong>CIDR Block:</strong> IP range for VPC. Example: <code>10.0.0.0/16</code> = 65,536 IPs. Choose wisely &mdash; can't change later.</li>
                    <li><strong>Public Subnet:</strong> Has route to Internet Gateway. Resources get public IP. For: ALBs, NAT Gateways, bastion hosts.</li>
                    <li><strong>Private Subnet:</strong> No direct internet access. For: App servers, databases, internal services.</li>
                    <li><strong>Best Practice:</strong> At least 2 AZs, each with public + private subnet. /24 per subnet (256 IPs, 251 usable &mdash; AWS reserves 5).</li>
                </ul>
<pre><code># Typical 3-tier VPC layout
VPC: 10.0.0.0/16

Public Subnets (ALB, NAT):
  10.0.1.0/24  (AZ-a)    10.0.2.0/24  (AZ-b)

Private Subnets (App servers):
  10.0.10.0/24 (AZ-a)    10.0.20.0/24 (AZ-b)

Data Subnets (RDS, ElastiCache):
  10.0.100.0/24 (AZ-a)   10.0.200.0/24 (AZ-b)</code></pre>
            </div>

            <div class="point">
                <strong>Internet Gateway (IGW) & NAT Gateway</strong>
                <ul>
                    <li><strong>IGW:</strong> Allows public subnet resources to reach the internet (and internet to reach them). One per VPC. Free.</li>
                    <li><strong>NAT Gateway:</strong> Allows private subnet resources to reach the internet (outbound only &mdash; for updates, API calls). Internet can't initiate connection in. Managed, scales automatically. ~$0.045/hr + data charges. Place in public subnet.</li>
                    <li><strong>NAT Instance:</strong> EC2 instance doing NAT. Cheaper but you manage it. Use for dev/cost-sensitive environments.</li>
                </ul>
            </div>

            <div class="point">
                <strong>Route Tables</strong>
<pre><code># Public Subnet Route Table
Destination      Target
10.0.0.0/16      local          # VPC internal traffic
0.0.0.0/0        igw-xxxxx      # All other traffic â†’ Internet Gateway

# Private Subnet Route Table
Destination      Target
10.0.0.0/16      local          # VPC internal traffic
0.0.0.0/0        nat-xxxxx      # All other traffic â†’ NAT Gateway</code></pre>
            </div>

            <div class="point">
                <strong>Security Groups vs NACLs</strong>
<pre><code>Feature          | Security Group         | NACL
-----------------+------------------------+-------------------------
Level            | Instance (ENI)         | Subnet
State            | Stateful               | Stateless
Rules            | Allow only             | Allow + Deny
Evaluation       | All rules evaluated    | Rules by number (lowâ†’high)
Default          | Deny all in, Allow out | Allow all in + out
Return traffic   | Auto-allowed           | Must explicitly allow</code></pre>
                <ul>
                    <li><strong>SG tip:</strong> Reference other SGs instead of IPs. Example: ALB SG allows 443 from 0.0.0.0/0. App SG allows 8080 from ALB-SG only.</li>
                    <li><strong>NACL tip:</strong> Use as extra defense layer. Block known bad IPs at subnet level. Remember: must allow ephemeral ports (1024-65535) for return traffic.</li>
                </ul>
            </div>

            <div class="point">
                <strong>VPC Peering</strong>
                <p>Private connection between two VPCs (same or different accounts/regions). Traffic stays on AWS backbone. <strong>Not transitive</strong> &mdash; if A peers with B and B peers with C, A can't talk to C. CIDR blocks must not overlap.</p>
            </div>

            <div class="point">
                <strong>Transit Gateway</strong>
                <p>Hub-and-spoke model. Connect multiple VPCs, on-prem networks, VPNs through a single gateway. Scales to thousands of VPCs. Supports transitive routing. Replaces complex peering mesh.</p>
<pre><code># Without Transit Gateway: N VPCs need N*(N-1)/2 peering connections
# 10 VPCs = 45 peering connections ðŸ˜©

# With Transit Gateway: N VPCs need N connections
# 10 VPCs = 10 connections to TGW âœ…
# Plus: centralized routing, monitoring, security</code></pre>
            </div>

            <div class="point">
                <strong>VPN & Direct Connect</strong>
                <ul>
                    <li><strong>Site-to-Site VPN:</strong> Encrypted tunnel over public internet. Quick setup (~minutes). Bandwidth limited by internet connection. For: dev, backup, low-traffic hybrid.</li>
                    <li><strong>Direct Connect:</strong> Dedicated physical fiber from your data center to AWS. 1 Gbps or 10 Gbps. Consistent latency, no internet. For: high-throughput production workloads, compliance. Takes weeks to provision.</li>
                    <li><strong>Direct Connect Gateway:</strong> Access VPCs in multiple regions via single Direct Connect.</li>
                </ul>
            </div>

            <div class="point">
                <strong>VPC Endpoints</strong>
                <ul>
                    <li><strong>Gateway Endpoint:</strong> Free. For S3 and DynamoDB. Add entry to route table. Traffic stays in AWS network.</li>
                    <li><strong>Interface Endpoint (PrivateLink):</strong> ENI in your subnet. For 100+ AWS services (SQS, SNS, KMS, CloudWatch). Costs ~$0.01/hr. Private DNS resolves service to private IP.</li>
                    <li><strong>Why?</strong> Keep traffic off the internet. Required for private subnets without NAT. Better security + lower data transfer costs.</li>
                </ul>
            </div>

            <div class="point">
                <strong>VPC Flow Logs</strong>
                <p>Capture IP traffic metadata (source, dest, port, action, bytes). Attach to VPC, subnet, or ENI. Send to CloudWatch Logs or S3. For: troubleshooting connectivity, security analysis, compliance auditing.</p>
<pre><code># Flow Log format example:
# version account-id eni-id srcaddr dstaddr srcport dstport protocol packets bytes start end action log-status
2 123456789012 eni-abc123 10.0.1.5 52.94.133.10 49761 443 6 12 1080 1580000000 1580000060 ACCEPT OK
2 123456789012 eni-abc123 203.0.113.99 10.0.1.5 0 0 1 4 336 1580000000 1580000060 REJECT OK</code></pre>
            </div>

            <!-- Interview Q&A -->
            <div class="qa">
                <h3>Interview Q&A</h3>

                <div class="q">
                    <div class="question">Q1: Design a VPC for a 3-tier web application.</div>
                    <div class="answer"><strong>VPC:</strong> 10.0.0.0/16 across 2 AZs. <strong>Tier 1 (Public):</strong> 2 public subnets for ALB + NAT Gateway. <strong>Tier 2 (Private):</strong> 2 private subnets for app servers (EC2/ECS). <strong>Tier 3 (Data):</strong> 2 isolated subnets for RDS Multi-AZ + ElastiCache. SGs: ALB accepts 443 from internet â†’ App accepts 8080 from ALB-SG only â†’ DB accepts 3306 from App-SG only. NAT Gateway for outbound (updates, external APIs). VPC endpoints for S3 and DynamoDB.</div>
                </div>

                <div class="q">
                    <div class="question">Q2: How does a private subnet access the internet?</div>
                    <div class="answer">Via <strong>NAT Gateway</strong> placed in a public subnet. Private subnet route table has <code>0.0.0.0/0 â†’ nat-gw</code>. NAT Gateway has a route to IGW via public subnet route table. Traffic flow: Private instance â†’ NAT GW (translates private IP to NAT's Elastic IP) â†’ IGW â†’ internet. Response comes back same path. Internet <strong>cannot</strong> initiate connections to private instances. For AWS service access without internet: use <strong>VPC Endpoints</strong>.</div>
                </div>

                <div class="q">
                    <div class="question">Q3: VPC Peering vs Transit Gateway &mdash; when to use which?</div>
                    <div class="answer"><strong>VPC Peering:</strong> Simple, free data transfer (same region), low latency. Use for 2-3 VPCs that need direct communication. Limitation: not transitive, full mesh gets complex. <strong>Transit Gateway:</strong> Hub-and-spoke, supports transitive routing, connects 1000s of VPCs + on-prem. Use when: >3 VPCs, need centralized routing/monitoring, hybrid connectivity. We used TGW at CorroHealth to connect prod VPC + staging VPC + on-prem via VPN &mdash; single point of management.</div>
                </div>

                <div class="q">
                    <div class="question">Q4: What are VPC Endpoints and why use them?</div>
                    <div class="answer">VPC Endpoints let you access AWS services <strong>without going through the internet</strong>. Two types: <strong>Gateway</strong> (free, for S3/DynamoDB, route table entry) and <strong>Interface/PrivateLink</strong> (ENI in your subnet, for 100+ services). Benefits: <strong>1)</strong> Better security &mdash; traffic never leaves AWS network. <strong>2)</strong> No need for NAT Gateway (saves cost). <strong>3)</strong> Required for private subnets accessing S3/DynamoDB. <strong>4)</strong> Lower latency. We used Gateway Endpoint for S3 access from private app servers.</div>
                </div>

                <div class="q">
                    <div class="question">Q5: Direct Connect vs VPN &mdash; when to use each?</div>
                    <div class="answer"><strong>VPN:</strong> Quick setup (minutes), encrypted over internet, up to 1.25 Gbps per tunnel (use multiple for more). Good for: dev, backup, low-traffic hybrid. <strong>Direct Connect:</strong> Dedicated fiber, consistent latency, 1-10 Gbps, takes weeks to provision. For: production workloads needing consistent performance, large data transfers, compliance (data must not traverse public internet). Best practice: use both &mdash; <strong>Direct Connect primary + VPN as failover</strong>.</div>
                </div>

                <div class="q">
                    <div class="question">Q6: How to troubleshoot "instance can't reach the internet"?</div>
                    <div class="answer">Checklist: <strong>1)</strong> Is instance in public subnet? Check route table for IGW route. <strong>2)</strong> Does instance have public/Elastic IP? <strong>3)</strong> Security Group: outbound rule allows traffic? <strong>4)</strong> NACL: allows outbound + ephemeral port inbound? <strong>5)</strong> If private subnet: NAT Gateway exists? Route table has 0.0.0.0/0 â†’ NAT? <strong>6)</strong> NAT Gateway in public subnet with IGW route? <strong>7)</strong> Check VPC Flow Logs for REJECT entries. Usually it's a missing route or SG rule.</div>
                </div>

                <div class="q">
                    <div class="question">Q7: Stateful vs Stateless firewalls &mdash; explain with SG and NACL.</div>
                    <div class="answer"><strong>Stateful (SG):</strong> If you allow inbound on port 443, the response is <strong>automatically allowed</strong> regardless of outbound rules. It tracks connection state. <strong>Stateless (NACL):</strong> Each direction evaluated independently. If you allow inbound 443, you MUST also allow outbound on <strong>ephemeral ports (1024-65535)</strong> for the response. Forgetting this is the #1 NACL mistake. NACLs process rules by number &mdash; first match wins (unlike SGs which evaluate all rules).</div>
                </div>

                <div class="q">
                    <div class="question">Q8: How to design VPC for HIPAA compliance?</div>
                    <div class="answer"><strong>1)</strong> All resources in <strong>private subnets</strong> &mdash; no public IPs on app/data tier. <strong>2)</strong> VPC Endpoints for AWS services (no internet traversal). <strong>3)</strong> <strong>NACLs + SGs</strong> with least-privilege rules. <strong>4)</strong> <strong>VPC Flow Logs</strong> enabled and shipped to S3/CloudWatch for audit. <strong>5)</strong> <strong>Direct Connect or VPN</strong> for on-prem connectivity. <strong>6)</strong> <strong>PrivateLink</strong> for third-party service access. <strong>7)</strong> Encrypt all traffic with TLS. We implemented all of these at CorroHealth for PHI data handling.</div>
                </div>
            </div>
        </div>

        <!-- CONCEPT 3 -->
        <div class="concept" id="concept-3">
            <h2>3. S3 & Storage</h2>
            <span class="tag">Object Storage</span>

            <div class="point">
                <strong>What is S3?</strong>
                <p>Simple Storage Service &mdash; unlimited object storage. Store any file (up to 5TB per object). Objects stored in <strong>buckets</strong> (globally unique name). Flat structure (no real folders &mdash; prefixes simulate folders). 11 9's durability (99.999999999%). Used for: static assets, backups, data lakes, logs, ML datasets.</p>
            </div>

            <div class="point">
                <strong>Storage Classes</strong>
                <ul>
                    <li><strong>S3 Standard:</strong> Default. Frequently accessed. 3 AZ replication. Lowest latency. Most expensive storage.</li>
                    <li><strong>S3 Intelligent-Tiering:</strong> Auto-moves objects between tiers based on access patterns. No retrieval fees. Best when access patterns are unknown.</li>
                    <li><strong>S3 Standard-IA (Infrequent Access):</strong> Lower storage cost, retrieval fee. Min 30 days. For: backups accessed occasionally.</li>
                    <li><strong>S3 One Zone-IA:</strong> Single AZ. 20% cheaper than Standard-IA. For: reproducible data, secondary backups.</li>
                    <li><strong>S3 Glacier Instant Retrieval:</strong> Millisecond retrieval. Cheapest for data accessed once per quarter.</li>
                    <li><strong>S3 Glacier Flexible:</strong> Minutes to hours retrieval (Expedited: 1-5 min, Standard: 3-5 hr, Bulk: 5-12 hr). For: archives.</li>
                    <li><strong>S3 Glacier Deep Archive:</strong> Cheapest. 12-48 hour retrieval. For: compliance archives, 7+ year retention.</li>
                </ul>
            </div>

            <div class="point">
                <strong>Lifecycle Policies</strong>
                <p>Automatically transition objects between storage classes or delete after expiry.</p>
<pre><code>{
  "Rules": [{
    "ID": "ArchiveOldLogs",
    "Status": "Enabled",
    "Filter": { "Prefix": "logs/" },
    "Transitions": [
      { "Days": 30, "StorageClass": "STANDARD_IA" },
      { "Days": 90, "StorageClass": "GLACIER" },
      { "Days": 365, "StorageClass": "DEEP_ARCHIVE" }
    ],
    "Expiration": { "Days": 2555 }  // Delete after 7 years
  }]
}</code></pre>
            </div>

            <div class="point">
                <strong>Versioning</strong>
                <ul>
                    <li>Keep multiple versions of an object. Protects against accidental deletes/overwrites.</li>
                    <li>Delete adds a <strong>delete marker</strong> (soft delete). Previous versions remain accessible.</li>
                    <li>Combine with lifecycle to expire old versions: <code>"NoncurrentVersionExpiration": { "NoncurrentDays": 30 }</code></li>
                    <li><strong>MFA Delete:</strong> Require MFA to permanently delete versions. Extra protection for critical data.</li>
                </ul>
            </div>

            <div class="point">
                <strong>Encryption</strong>
                <ul>
                    <li><strong>SSE-S3:</strong> AWS manages keys. Default encryption. AES-256. Zero effort.</li>
                    <li><strong>SSE-KMS:</strong> AWS KMS manages keys. Audit trail via CloudTrail. Key rotation. Use for: compliance (HIPAA, PCI).</li>
                    <li><strong>SSE-C:</strong> You provide encryption key with each request. AWS encrypts/decrypts but doesn't store key.</li>
                    <li><strong>Client-Side:</strong> Encrypt before upload. AWS never sees plaintext. Maximum control.</li>
                    <li><strong>In Transit:</strong> Always use HTTPS (TLS). Enforce with bucket policy: <code>"aws:SecureTransport": "false"</code> â†’ Deny.</li>
                </ul>
            </div>

            <div class="point">
                <strong>Replication</strong>
                <ul>
                    <li><strong>CRR (Cross-Region Replication):</strong> Replicate to bucket in different region. For: DR, compliance, latency reduction.</li>
                    <li><strong>SRR (Same-Region Replication):</strong> Replicate within same region. For: log aggregation, live replica between accounts.</li>
                    <li>Requires versioning enabled on both source and destination. Can replicate to different account.</li>
                </ul>
            </div>

            <div class="point">
                <strong>Presigned URLs & S3 Select</strong>
<pre><code># Presigned URL: Temporary access to private objects
aws s3 presign s3://my-bucket/private-report.pdf --expires-in 3600
# Returns: https://my-bucket.s3.amazonaws.com/private-report.pdf?X-Amz-...
# Anyone with URL can download for 1 hour. No AWS credentials needed.

# S3 Select: Query CSV/JSON/Parquet with SQL without downloading entire file
aws s3api select-object-content \
  --bucket my-bucket --key data.csv \
  --expression "SELECT * FROM s3object WHERE age > 30" \
  --expression-type SQL \
  --input-serialization '{"CSV": {"FileHeaderInfo": "USE"}}' \
  --output-serialization '{"CSV": {}}' output.csv
# Saves bandwidth and cost â€” only transfers matching rows</code></pre>
            </div>

            <div class="point">
                <strong>S3 Performance & Transfer</strong>
                <ul>
                    <li><strong>Multipart Upload:</strong> Required for >5GB. Recommended for >100MB. Parallel upload of parts. Resume on failure.</li>
                    <li><strong>Transfer Acceleration:</strong> Uses CloudFront edge locations. Upload to nearest edge â†’ AWS backbone to S3. 50-500% faster for long-distance uploads.</li>
                    <li><strong>S3 Byte-Range Fetches:</strong> Download specific byte ranges in parallel. Speed up large file downloads.</li>
                    <li><strong>Performance:</strong> 3,500 PUT/POST + 5,500 GET per second <strong>per prefix</strong>. Spread across prefixes for more throughput.</li>
                </ul>
            </div>

            <div class="point">
                <strong>Bucket Policies & ACLs</strong>
<pre><code>// Bucket Policy: Allow public read on /public/* prefix only
{
  "Version": "2012-10-17",
  "Statement": [{
    "Sid": "PublicRead",
    "Effect": "Allow",
    "Principal": "*",
    "Action": "s3:GetObject",
    "Resource": "arn:aws:s3:::my-bucket/public/*"
  }]
}

// Block Public Access (account-level recommended)
// S3 Block Public Access â†’ ON (all 4 settings)
// Only open specific buckets via bucket policy when needed</code></pre>
            </div>

            <!-- Interview Q&A -->
            <div class="qa">
                <h3>Interview Q&A</h3>

                <div class="q">
                    <div class="question">Q9: How to design cost-effective S3 storage for healthcare data?</div>
                    <div class="answer"><strong>Active patient docs (0-30 days):</strong> S3 Standard. <strong>Recent archives (30-90 days):</strong> S3 Standard-IA via lifecycle rule. <strong>Compliance archives (90+ days):</strong> Glacier Flexible. <strong>7-year retention (legal):</strong> Glacier Deep Archive. Enable versioning for accidental delete protection. SSE-KMS encryption for HIPAA. Object Lock (WORM) for compliance. We saved ~60% on storage costs with this tiered approach at CorroHealth.</div>
                </div>

                <div class="q">
                    <div class="question">Q10: S3 vs EBS vs EFS &mdash; when to use which?</div>
                    <div class="answer"><strong>S3:</strong> Object storage. Unlimited. HTTP API access. For: static files, backups, data lakes, media. <strong>EBS:</strong> Block storage. Attached to single EC2. For: OS disk, databases, app data. <strong>EFS:</strong> File system (NFS). Shared across multiple EC2 instances. For: CMS content, shared config, container storage. <strong>Rule:</strong> S3 for objects, EBS for single-instance disk, EFS for shared file system.</div>
                </div>

                <div class="q">
                    <div class="question">Q11: How to secure an S3 bucket properly?</div>
                    <div class="answer"><strong>1)</strong> Enable <strong>S3 Block Public Access</strong> at account level. <strong>2)</strong> Bucket policy with least privilege. <strong>3)</strong> SSE-KMS encryption (audit trail). <strong>4)</strong> Enable versioning + MFA Delete. <strong>5)</strong> Enforce HTTPS via bucket policy (<code>SecureTransport</code>). <strong>6)</strong> VPC Gateway Endpoint for private access. <strong>7)</strong> Access logging to separate bucket. <strong>8)</strong> IAM policies &mdash; no <code>s3:*</code> wildcards. <strong>9)</strong> Object Lock for WORM compliance.</div>
                </div>

                <div class="q">
                    <div class="question">Q12: Explain S3 event notifications &mdash; real use case.</div>
                    <div class="answer">S3 can trigger events on <strong>PUT, POST, DELETE, Restore</strong>. Targets: Lambda, SQS, SNS, EventBridge. <strong>Our use case:</strong> Medical document uploaded to S3 â†’ S3 Event triggers Lambda â†’ Lambda sends message to SQS â†’ NLP worker picks up, processes document, writes results to MongoDB. Fully serverless ingestion pipeline. Also used for: image thumbnail generation, virus scanning on upload, ETL triggers.</div>
                </div>

                <div class="q">
                    <div class="question">Q13: What is S3 Object Lock and when to use it?</div>
                    <div class="answer">Object Lock enforces <strong>WORM (Write Once Read Many)</strong>. Two modes: <strong>Governance</strong> (users with special permissions can override) and <strong>Compliance</strong> (nobody can delete, not even root, until retention expires). Use for: <strong>regulatory compliance</strong> (HIPAA, SEC, FINRA), audit logs, legal hold documents. We used Compliance mode for medical records requiring 7-year retention at CorroHealth.</div>
                </div>

                <div class="q">
                    <div class="question">Q14: How to optimize S3 costs?</div>
                    <div class="answer"><strong>1)</strong> Lifecycle policies to auto-transition to cheaper tiers. <strong>2)</strong> S3 Intelligent-Tiering for unknown access patterns. <strong>3)</strong> Delete incomplete multipart uploads (<code>AbortIncompleteMultipartUpload: 7 days</code>). <strong>4)</strong> Expire old object versions. <strong>5)</strong> S3 Analytics to identify transition candidates. <strong>6)</strong> Compress before upload (gzip). <strong>7)</strong> Use VPC Gateway Endpoint (no data transfer charges). <strong>8)</strong> S3 Select instead of downloading full objects.</div>
                </div>

                <div class="q">
                    <div class="question">Q15: CRR vs SRR &mdash; when to use each?</div>
                    <div class="answer"><strong>CRR (Cross-Region):</strong> Disaster recovery (data survives entire region failure), compliance (data must exist in specific regions), latency reduction (users read from nearby region). <strong>SRR (Same-Region):</strong> Log aggregation from multiple accounts into one bucket, live replica between prod/analytics accounts, data sovereignty (keep in same region but different account). Both need versioning enabled. Replication is <strong>asynchronous</strong> &mdash; most objects replicate within 15 minutes.</div>
                </div>

                <div class="q">
                    <div class="question">Q16: How does S3 Transfer Acceleration work?</div>
                    <div class="answer">Client uploads to the <strong>nearest CloudFront edge location</strong> (150+ globally). From edge, data travels over <strong>AWS's optimized backbone</strong> network to the S3 bucket region. 50-500% faster than regular internet upload for long distances. Use when: uploading from globally distributed clients, large file uploads from far-away regions. Enable per bucket. Uses endpoint: <code>mybucket.s3-accelerate.amazonaws.com</code>. Small extra cost but significant speed gain.</div>
                </div>
            </div>
        </div>

    </main>
</div>

<script>
    // Mobile menu toggle
    function toggleMenu() {
        document.querySelector('.sidebar').classList.toggle('open');
        document.querySelector('.sidebar-overlay').classList.toggle('show');
    }

    // Close sidebar on link click (mobile)
    document.querySelectorAll('.sidebar nav a').forEach(a => {
        a.addEventListener('click', () => {
            if (window.innerWidth <= 768) {
                document.querySelector('.sidebar').classList.remove('open');
                document.querySelector('.sidebar-overlay').classList.remove('show');
            }
        });
    });

    // Highlight active sidebar link on scroll
    const links = document.querySelectorAll('.sidebar nav a');
    const sections = document.querySelectorAll('.concept');
    window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(s => {
            if (window.scrollY >= s.offsetTop - 100) current = s.id;
        });
        links.forEach(a => {
            a.classList.remove('active');
            if (a.getAttribute('href') === '#' + current) a.classList.add('active');
        });
    });
</script>
</body>
</html>